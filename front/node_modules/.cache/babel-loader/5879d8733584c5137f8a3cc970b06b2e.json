{"ast":null,"code":"var _jsxFileName = \"/home/vagrant/zimozi/front/src/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './Login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nasync function loginUser(credentials) {\n  console.log(\"Login.js Credentials : \" + JSON.stringify(credentials));\n  var ip = process.env.REACT_APP_BACKEND_IP;\n  var port = process.env.REACT_APP_BACKEND_PORT;\n  console.log(\"REACT IP : \" + ip);\n  console.log(\"REACT PORT : \" + port); //ip = window.config.REACT_APP_BACKEND_IP;\n  //port = window.config.REACT_APP_BACKEND_PORT;\n  //console.log(\"REACT IP : \"+ip);\n  //console.log(\"REACT PORT : \"+port);\n\n  if (ip === undefined) {\n    ip = \"192.168.56.41\";\n  }\n\n  if (port === undefined) {\n    port = 8099;\n  }\n\n  const login_url = \"http://\" + ip + \":\" + port + \"/login\";\n  console.log(\"URL : \" + login_url);\n  return fetch(login_url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(credentials)\n  }).then(data => data.json());\n}\n\nexport default function Login(_ref) {\n  _s();\n\n  let {\n    setToken,\n    setRole\n  } = _ref;\n  const [username, setUserName] = useState();\n  const [password, setPassword] = useState();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const user = await loginUser({\n      username,\n      password\n    });\n    console.log(\"Login.js Token : \" + JSON.stringify(user.token));\n    console.log(\"Login.js Role : \" + JSON.stringify(user.role));\n    setToken(user.token); //setRole(user.role);\n\n    localStorage.setItem('role', JSON.stringify(user.role));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Please Log In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: e => setUserName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"mDofyeUwpW7DCqzRlXtw6aPy/HU=\");\n\n_c = Login;\nLogin.propTypes = {\n  setToken: PropTypes.func.isRequired,\n  setRole: PropTypes.func.isRequired\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","PropTypes","loginUser","credentials","console","log","JSON","stringify","ip","process","env","REACT_APP_BACKEND_IP","port","REACT_APP_BACKEND_PORT","undefined","login_url","fetch","method","headers","body","then","data","json","Login","setToken","setRole","username","setUserName","password","setPassword","handleSubmit","e","preventDefault","user","token","role","localStorage","setItem","target","value","propTypes","func","isRequired"],"sources":["/home/vagrant/zimozi/front/src/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Login.css';\r\n\r\nasync function loginUser(credentials) {\r\n  console.log(\"Login.js Credentials : \" + JSON.stringify(credentials));\r\n  var ip = process.env.REACT_APP_BACKEND_IP;\r\n  var port = process.env.REACT_APP_BACKEND_PORT;\r\n  console.log(\"REACT IP : \"+ip);\r\n  console.log(\"REACT PORT : \"+port);\r\n  //ip = window.config.REACT_APP_BACKEND_IP;\r\n  //port = window.config.REACT_APP_BACKEND_PORT;\r\n  //console.log(\"REACT IP : \"+ip);\r\n  //console.log(\"REACT PORT : \"+port);\r\n  if (ip === undefined) {\r\n      ip = \"192.168.56.41\";\r\n  }\r\n  if (port === undefined) {\r\n      port = 8099;\r\n  }\r\n  const login_url = \"http://\" + ip + \":\" + port + \"/login\";\r\n  console.log(\"URL : \"+login_url);\r\n  return fetch(login_url, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(credentials)\r\n  })\r\n    .then(data => data.json())\r\n }\r\n\r\n export default function Login({ setToken, setRole }) {\r\n  const [username, setUserName] = useState();\r\n  const [password, setPassword] = useState();\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    const user = await loginUser({\r\n      username,\r\n      password\r\n    });\r\n    console.log(\"Login.js Token : \" + JSON.stringify(user.token));\r\n    console.log(\"Login.js Role : \" + JSON.stringify(user.role));\r\n    setToken(user.token);\r\n    //setRole(user.role);\r\n    localStorage.setItem('role', JSON.stringify(user.role));\r\n  }\r\n\r\n  return(\r\n    <div className=\"login-wrapper\">\r\n      <h1>Please Log In</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <p>Username</p>\r\n          <input type=\"text\" onChange={e => setUserName(e.target.value)} />\r\n        </label>\r\n        <label>\r\n          <p>Password</p>\r\n          <input type=\"password\" onChange={e => setPassword(e.target.value)} />\r\n        </label>\r\n        <div>\r\n          <button type=\"submit\">Submit</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nLogin.propTypes = {\r\n  setToken: PropTypes.func.isRequired,\r\n  setRole: PropTypes.func.isRequired\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}